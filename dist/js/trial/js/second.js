!function(t){var e={};function a(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=1)}([,function(t,e,a){"use strict";a.r(e);class i{constructor(){this._canvas=document.querySelector("canvas"),this._rect=this._canvas.getBoundingClientRect(),this._ctx=this._canvas.getContext("2d"),this._editor=document.getElementById("editor-container"),this._baseInnerWidth=1366,this._baseInnerHeight=657,this._baseCanvasWidth=700,this._baseCanvasHeight=500,this.setUpCanvas()}getCanvasValues(){return{canvas:this._canvas,ctx:this._ctx,rect:this._rect}}setUpCanvas(){const t=this._getMargin();this._editor.style.marginLeft=t+"px",innerWidth<=940&&(this._canvas.width=innerWidth-50,this._rect.width=this._canvas.width,this._editor.style.marginLeft="25px",this._editor.style.marginRight="25px")}resizeCanvas(){this.setUpCanvas()}clearCanvas(){this._ctx.clearRect(0,0,this._rect.width,this._rect.height)}_getMargin(){let t=this._baseInnerWidth/innerWidth;this._canvas.width=this._baseCanvasWidth/t,this._canvas.height=this._baseCanvasHeight;return(innerWidth-this._canvas.width-50-100)/2}}(new class{constructor(){this._canvasView=new i;const t=this._canvasView.getCanvasValues();this._canvas=t.canvas,this._ctx=t.ctx,this._rect=t.rect,this._setupListeners()}drawImage(t="../img/pagol2.jpg"){let e,a;this._canvasView.clearCanvas(),this.loadImageData(t,t=>{e=t.img,a=t.transform,console.log(t),this._ctx.drawImage(e,a.x,a.y,a.width,a.height)})}changeImage(t,e,a,i){i[1],i[2],i[3],i[4];let s=i[0],n=rgbToHsl(...selectedColor),r=0,c=0;for(let t=0;t<s.data.length;t+=4){let i=rgbToHsl(e.data[t],e.data[t+1],e.data[t+2]);if(255==s.data[t]&&255==s.data[t+1]&&255==s.data[t+2]){let e,s;c++,e=n[2]+(i[2]+-avgL),e*=.85*n[2],e=(e+n[2])/2,r+=e,s=n[1]-n[1]*(.6*n[2]),s=(n[1]+s)/2;let h=hslToRgb(n[0],s,e);a.data[t]=h[0],a.data[t+1]=h[1],a.data[t+2]=h[2]}}ctx.putImageData(a,0,0),console.log("selectedHsl[1]: "+n[1]+" selectedHsl[2]: "+n[2]),console.log("highest saturation: "+(n[1]-n[1]*(.6*n[2]))),console.log("Lightness value:  "+r/c)}canvasClicked(t){let e,a;saveImageDataForUndo(ctx.getImageData(0,0,rect.height,rect.width)),clearRedo(),mainImgData&&ctx.putImageData(mainImgData,0,0);let i=parseInt(editor.style.marginLeft.replace("px",""));e=t.clientX-rect.left-i,a=t.clientY-canvasTop+pageYOffset;let s=rect.top;console.log("mouseY: "+a+"\nrect.top: "+s+"\nclientY: "+t.clientY+"\npagoffset: "+pageYOffset);let n=edgeDetect(e,a),r=ctx.getImageData(e,a,2,2);upImgData&&ctx.putImageData(upImgData,0,0),clickPointHsl=rgbToHsl(r.data[0],r.data[1],r.data[2]),console.log("clickPointHsl: "+clickPointHsl),upImgData=ctx.getImageData(0,0,rect.width,rect.height),changeImage(clickPointHsl,mainImgData,upImgData,n)}loadImageData(t,e){const a=new Image;a.onload=()=>{let t=this._getImageTransform(a.width,a.height);a.width=t.width,a.height=t.height,e({img:a,transform:t})},a.src=t}_getImageTransform(t,e){let a=0,i=0,s=t,n=e,r=s/n;return r>this._canvas.width/this._canvas.height?(s=this._canvas.width,n=s/r,a=0,i=(this._canvas.height-n)/2):(n=this._canvas.height,s=n*r,i=0,a=(this._canvas.width-s)/2),{width:s,height:n,x:a,y:i}}_setupListeners(){this._canvas.addEventListener("click",t=>{canvasClicked(t)}),window.addEventListener("orientationChange",t=>{this.resizeCanvas()})}getImageData(){this._ctx.getImageData(0,0,this._canvas.width,this._canvas.height)}}).drawImage("../img/img1.jpg")}]);